<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>IPSW Modding Guide for Windows</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    max-width: 900px;
    margin: 2rem auto;
    line-height: 1.6;
    padding: 0 1rem;
    background: #0d0d0d;
    color: #eee;
  }
  h1, h2 {
    color: #4da6ff;
  }
  code {
    background: #222;
    padding: 0.15em 0.3em;
    border-radius: 3px;
    font-family: monospace;
    font-size: 0.95em;
    color: #a8ff60;
  }
  pre {
    background: #111;
    color: #a8ff60;
    padding: 1em;
    overflow-x: auto;
    border-radius: 5px;
    font-family: Consolas, Monaco, 'Courier New', monospace;
    font-size: 0.95em;
    margin: 1em 0;
  }
  pre.underline {
    text-decoration: underline;
  }
  section {
    margin-bottom: 2rem;
  }
  ul {
    margin-left: 1.25rem;
  }
  a {
    color: #4da6ff;
  }
  footer p {
    color: #999;
    text-align: center;
  }

  /* Scrollbar styling for WebKit browsers (Chrome, Edge, Safari) */
  pre::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  pre::-webkit-scrollbar-track {
    background: #2a2a2a;
    border-radius: 4px;
  }
  pre::-webkit-scrollbar-thumb {
    background-color: #888;
    border-radius: 4px;
    border: 2px solid #2a2a2a;
  }
  pre::-webkit-scrollbar-thumb:hover {
    background-color: #aaa;
  }

  /* Scrollbar styling for Firefox */
  pre {
    scrollbar-width: thin;
    scrollbar-color: #888 #2a2a2a;
  }
</style>
</head>
<body>
<h1>Easy Guide to Modding IPSW Files on Windows</h1>

<section>
  <h2>1. Extract the IPSW File</h2>
  <p>
    Download the IPSW for your iPhone and iOS version from <a href="ipsw.me" target="_blank" rel="noopener noreferrer">ipsw.me</a>Rename <code>.ipsw</code> to <code>.zip</code> and extract it.
  </p>
</section>

<section>
  <h2>2. Find Encrypted Files</h2>
  <p>Look for:</p>
  <ul>
    <li><code>*.dmg.aea</code> — Encrypted disk images (root filesystem)</li>
    <li><code>*.im4p</code> — Encrypted firmware files (like SEP)</li>
  </ul>
</section>

<section>
  <h2>3. Convert Base64 Keys to Hex</h2>
  <p>Windows doesn't have the Linux <code>base64</code> command. Use PowerShell:</p>
  <pre class="underline"><code>$b64 = "&lt;base64_key&gt;"</code></pre>
  <pre><code>$bytes = [Convert]::FromBase64String($b64)
$hex = ($bytes | ForEach-Object { $_.ToString("x2") }) -join ""
Write-Output $hex
  </code></pre>
  <p>Or use an online Base64-to-Hex converter.</p>
</section>

<section>
  <h2>4. Decrypt the Files</h2>
  <p>
    Use <code>OpenSSL</code> or <code>img4tool</code> (recommended) with the key and IV (usually zeros).
  </p>
  <p><strong>OpenSSL example:</strong></p>
  <pre><code>"C:\Program Files\OpenSSL-Win64\bin\openssl.exe" enc -d -aes-128-cbc -in "044-89572-099.dmg.aea" -out "rootfs.dmg" -K &lt;hex_key&gt; -iv 00000000000000000000000000000000
  </code></pre>
  <p><strong>Note:</strong> <code>img4tool</code> is best for <code>.im4p</code> files.</p>
</section>

<section>
  <h2>5. Get <code>img4tool</code> on Windows</h2>
  <ul>
    <li>Install <a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener noreferrer">Windows Subsystem for Linux (WSL)</a></li>
    <li>Use WSL to compile and run <code>img4tool</code> from source</li>
    <li>Alternatively, find unofficial Windows builds or use a Linux VM</li>
  </ul>
</section>

<section>
  <h2>6. Modify the Decrypted Files</h2>
  <p>
    Mount the decrypted <code>.dmg</code> (use <code>HFSExplorer</code> or similar on Windows) and make your changes.
  </p>
</section>

<section>
  <h2>7. Re-encrypt the Modified Files</h2>
  <p>
    Use <code>img4tool</code> or <code>OpenSSL</code> again with the same key and IV to re-encrypt.
  </p>
</section>

<section>
  <h2>8. Repackage the IPSW</h2>
  <p>
    Replace the original encrypted files in the extracted folder with your modified ones.<br />
    Zip the folder and rename <code>.zip</code> back to <code>.ipsw</code>.
  </p>
</section>

<section>
  <h2>Additional Tips</h2>
  <ul>
    <li>Always quote paths with spaces in Windows command prompt</li>
    <li>Keys must be exactly 16 bytes (32 hex characters) for AES-128</li>
    <li>WSL greatly simplifies using Linux tools like <code>img4tool</code></li>
  </ul>
</section>

<footer>
  <p>
    For more help, ask me for detailed WSL setup or PowerShell key conversion commands!
  </p>
</footer>
</body>
</html>
